include:
  - local: .gitlab/templates/install_dependencies.yml
  - local: .gitlab/templates/checkout_submodule.yml
  - local: .gitlab/templates/install_pipeline_specific.yml
  - local: .gitlab/templates/check_installs.yml
  - local: .gitlab/templates/make_example_test.yml
  - local: .gitlab/templates/make_static_code_test.yml
  - local: .gitlab/templates/make_unit_test.yml
  
  
test:
  stage: test
  script: 
  - !reference [.install_dependencies, script]
  - !reference [.checkout_submodule, script]
  - !reference [.install_pipeline_specific, script]
  - !reference [.check_installs, script]
  - if [ "$CURRENT_TEST" == "example" ], then 
      example_test=true
    else
      example_test=false
    fi
  - !reference [.make_example_test, script]
  - if [ "$CURRENT_TEST" == "static" ], then 
      static_test=true
    else
      static_test=false
    fi
  - !reference [.make_static_code_test, script]
  - if [ "$CURRENT_TEST" == "unit" ], then 
      unit_test=true
    else
      unit_test=false
    fi
  - !reference [.make_unit_test, script]