include:
  - local: .gitlab/templates/install_dependencies.yml
  - local: .gitlab/templates/checkout_submodule.yml
  - local: .gitlab/templates/install_pipeline_specific.yml
  - local: .gitlab/templates/check_installs.yml
  - local: .gitlab/templates/make_example_test.yml
  - local: .gitlab/templates/make_static_code_test.yml
  - local: .gitlab/templates/make_unit_test.yml
  

test:
  stage: test
  variables:
    example_test: false
    static_test: false
    unit_test: false
  rules:
    - if: $CURRENT_TEST == "example"
      variables:
        example_test: true
    - if: $CURRENT_TEST == "static"
      variables:
        static_test: true
    - if: $CURRENT_TEST == "unit"
      variables:
        unit_test: true
  script: 
  - !reference [.install_dependencies, script]
  - !reference [.checkout_submodule, script]
  - !reference [.install_pipeline_specific, script]
  - !reference [.check_installs, script]
  - !reference [.make_example_test, script]
  - !reference [.make_static_code_test, script]
  - !reference [.make_unit_test, script]